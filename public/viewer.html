<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>BabyCam Viewer</title>
    <script>
      (function () {
        try {
          var t = localStorage.getItem("babycam-theme");
          document.documentElement.setAttribute("data-theme", t === "light" ? "light" : "dark");
        } catch (e) {
          document.documentElement.setAttribute("data-theme", "dark");
        }
      })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="viewer-shell">
      <div id="videoStage" class="viewer-stage" data-format="auto">
        <video id="remoteVideo" class="viewer-video" playsinline autoplay></video>
      </div>

      <div class="viewer-overlay">
        <div class="overlay-top">
          <span class="viewer-pill">
            <span id="viewerDot" class="dot"></span>
            <span id="viewerStatus">Conectando...</span>
          </span>
          <span class="viewer-pill">Sala: <span id="roomLabel"></span></span>
          <button
            class="viewer-btn icon-btn top-theme"
            type="button"
            data-theme-toggle
            data-theme-icon
            data-icon="theme-dark"
            aria-label="Cambiar tema"
            title="Cambiar tema"
          ></button>
        </div>

        <div class="overlay-bottom control-dock">
          <button
            id="fxBtn"
            class="viewer-btn icon-btn"
            type="button"
            data-icon="fx"
            aria-label="Abrir controles de imagen"
            title="Abrir controles de imagen"
          ></button>
          <button
            id="streamBtn"
            class="viewer-btn icon-btn"
            type="button"
            data-icon="play"
            aria-label="Iniciar transmision"
            title="Iniciar transmision"
          ></button>
          <button
            id="retryBtn"
            class="viewer-btn icon-btn"
            type="button"
            data-icon="retry"
            aria-label="Reintentar conexion"
            title="Reintentar conexion"
          ></button>
          <button
            id="muteBtn"
            class="viewer-btn icon-btn"
            type="button"
            data-icon="volume-on"
            aria-label="Silenciar"
            title="Silenciar"
          ></button>
          <button
            id="formatBtn"
            class="viewer-btn format-btn"
            type="button"
            aria-label="Cambiar formato de video"
            title="Cambiar formato de video"
          >
            Auto
          </button>
          <button
            id="fsBtn"
            class="viewer-btn icon-btn"
            type="button"
            data-icon="fullscreen"
            aria-label="Fullscreen"
            title="Fullscreen"
          ></button>
        </div>

        <section id="fxPanel" class="fx-panel hidden" aria-label="Controles de imagen">
          <header class="fx-header">
            <strong>Controles de imagen</strong>
            <button
              id="fxCloseBtn"
              type="button"
              class="viewer-btn icon-btn fx-close"
              data-icon="close"
              aria-label="Cerrar controles de imagen"
              title="Cerrar controles de imagen"
            ></button>
          </header>

          <label for="brightnessRange" class="fx-label">
            Brillo
            <span id="brightnessValue">100%</span>
          </label>
          <input id="brightnessRange" class="fx-range" type="range" min="60" max="220" step="1" />

          <label for="contrastRange" class="fx-label">
            Contraste
            <span id="contrastValue">100%</span>
          </label>
          <input id="contrastRange" class="fx-range" type="range" min="60" max="220" step="1" />

          <label for="zoomRange" class="fx-label">
            Zoom
            <span id="zoomValue">1.0x</span>
          </label>
          <input id="zoomRange" class="fx-range" type="range" min="100" max="300" step="1" />

          <label class="fx-switch" for="infraToggle">
            <input id="infraToggle" type="checkbox" />
            Blanco y negro (simular IR)
          </label>

          <button id="fxResetBtn" type="button" class="viewer-btn fx-reset">Restablecer</button>
        </section>
      </div>
    </main>

    <script src="/theme.js" type="module"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/viewer.js" type="module"></script>
  </body>
</html>
